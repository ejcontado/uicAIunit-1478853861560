!function(a){"function"==typeof define&&define.amd?define(["angular","../const/constants"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("angular"):require("angular")(b)),a(c,require("../var/constants")),c}:a(angular)}(function(a){var b=function(b,c,d,e){function f(){m.isOpen=!1}function g(b){if(m.type===j||m.type===k||m.type===l){var c=b.attr("class");c.indexOf("open")>-1?(b.removeClass("open"),m.isOpen=!1):(b.addClass("open"),m.isOpen=!0,a.element(d).find("body").one("click",i))}}function h(){return a.element(d).find("body .n-search.open")}function i(){var b=a.element(d).find("body .open a.dropdown-toggle");b&&b.length>0&&b.click()}var j="dropDown",k="clearDropDown",l="searchBtnDropDown",m=this;m.type||(m.type="standard"),m.isOpen=!1,m.updAndDown=function(c){var d=a.element(c.target).parent(),g=d.prev(),h=d.next();c.keyCode===b.UP?(1===g.length&&g.find("a")[0].focus(),c.preventDefault()):c.keyCode===b.DOWN?(1===h.length&&h.find("a")[0].focus(),c.preventDefault()):c.keyCode===b.ESC?(f(),c.preventDefault()):c.keyCode===b.SPACE&&(c.preventDefault(),c.stopPropagation(),e(function(){d.find("a").trigger("click")},0))},m.search=function(b){var c=a.element(b.target).parent().parent(),d=h();d.length>0&&d.not(c).removeClass("open"),g(c),b.preventDefault(),b&&b.stopPropagation()},m.clear=function(a){m.textValue="",h().removeClass("open"),a.stopPropagation(),a.preventDefault()},m.clearOnKeyDown=function(a){a.keyCode===b.ENTER||a.keyCode===b.SPACE?(m.textValue="",a.stopPropagation(),a.preventDefault()):a.keyCode===b.ESC&&a.target.blur()},m.handelKeyboard=function(c){var d=a.element(c.target);c.keyCode===b.ESC?a.element(c.target).parent().removeClass("open"):c.keyCode===b.SPACE||c.keyCode===b.ENTER?d.hasClass("dropdown-toggle")&&(c.preventDefault(),c.stopPropagation(),g(d.parent())):c.keyCode!==b.UP&&c.keyCode!==b.DOWN||(a.element(c.target).parent().find("ul>li>a:first")[0].focus(),c.preventDefault(),c.stopPropagation())},m.onTextInput=function(a){a.keyCode===b.ENTER&&this.onSubmitCallback&&this.onSubmitCallback()(a,m.textValue)},m.$onChanges=function(a){a.disable&&a.disable.currentValue&&(m.isOpen=!1)}};b.$inject=["WF-KEYCODE-CONST","$attrs","$document","$timeout"],a.module("wf.angular.search",["wf.angular.constants"]).component("wfSearch",{transclude:!0,templateUrl:"wf/ng-template/search/search.html",bindings:{textValue:"<",dropDownData:"<",disable:"<",type:"@",placeholder:"@",searchBtnText:"@",onSubmitCallback:"&",onItemSelectedCallback:"&"},controller:b}),a.module("wf.angular.search").run(["$templateCache",function(a){a.put("wf/ng-template/search/search.html","<div class=\"n-search\"\n     ng-class=\"{\n     'n-search-clearable':($ctrl.type=='clear'||$ctrl.type =='clearDropDown'),\n     'n-search-action':($ctrl.type=='searchBtnDropDown'||$ctrl.type =='searchBtn'),\n     'n-search-disable':$ctrl.disable\n     , 'open':($ctrl.isOpen )\n     }\"\n>\n    <a ng-if=\"!$ctrl.disable && ($ctrl.type!='dropDown' && $ctrl.type!='clearDropDown'&& $ctrl.type!='searchBtnDropDown')\"  class=\"n-search-icon\" >\n        <span class=\"icon icon-search\" ></span>\n    </a>\n    <a ng-if=\"$ctrl.disable && ($ctrl.type!='dropDown' && $ctrl.type!='clearDropDown'&& $ctrl.type!='searchBtnDropDown')\"  class=\"n-search-icon\" >\n        <span class=\"icon icon-search\" ></span>\n    </a>\n\n"+'    <a  ng-if="!$ctrl.disable && ($ctrl.type==\'dropDown\' || $ctrl.type==\'clearDropDown\'|| $ctrl.type==\'searchBtnDropDown\')" tabindex="0" ng-click="$ctrl.search($event)" ng-keydown="$ctrl.handelKeyboard($event)"  class="n-search-icon dropdown-toggle" >\n        <span class="icon icon-search" ></span>\n        <span class="icon icon-arrow"></span>\n    </a>\n\n    <a  ng-if="$ctrl.disable && ($ctrl.type==\'dropDown\' || $ctrl.type==\'clearDropDown\'|| $ctrl.type==\'searchBtnDropDown\')" tabindex="-1"   class="n-search-icon dropdown-toggle" disabled >\n        <span class="icon icon-search" ></span>\n        <span class="icon icon-arrow"></span>\n    </a>\n\n    <input ng-if="!$ctrl.disable"  ng-keydown="$ctrl.onTextInput($event)"  ng-model="$ctrl.textValue"  class="n-inputfield n-search-input" placeholder="{{$ctrl.placeholder}}">\n\n    <input ng-if="$ctrl.disable" tabindex="-1" disabled ng-model="$ctrl.textValue" class="n-inputfield n-search-input" placeholder="{{$ctrl.placeholder}}">\n\n    <ul ng-if="$ctrl.type==\'dropDown\' || $ctrl.type==\'clearDropDown\' || $ctrl.type==\'searchBtnDropDown\'" class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">\n        <li ng-if="!$ctrl.disable" ng-click="$ctrl.onItemSelectedCallback()($event,item,$ctrl.textValue)" ng-repeat="item in $ctrl.dropDownData" role="presentation"><a tabindex="{{$ctrl.disable?-1:0}}" ng-keydown="$ctrl.updAndDown($event)"  role="menuitem" href="#"><span value="{{item.value}}">{{item.text}}</span></a></li>\n    </ul>\n\n    <a ng-if="( $ctrl.type == \'clear\' || $ctrl.type==\'clearDropDown\' ) &&  !$ctrl.disable" ng-click="$ctrl.clear($event)"\n       ng-keydown="$ctrl.clearOnKeyDown($event)"\n       class="n-search-control-icon" href="#" tabindex="0" >\n        <span class="icon icon-close" ></span>\n    </a>\n    <a\n        ng-if=" ( $ctrl.type == \'clear\' || $ctrl.type==\'clearDropDown\' ) && $ctrl.disable"\n        tabindex="-1" disabled\n        class="n-search-control-icon" href="javascript:void(0)" >\n        <span class="icon icon-close" ></span>\n    </a>\n\n    <button ng-if="($ctrl.type == \'searchBtn\' || $ctrl.type == \'searchBtnDropDown\') && !$ctrl.disable " class="btn n-search-button"\n    ng-click="$ctrl.onSubmitCallback()($event,$ctrl.textValue)"\n    >{{$ctrl.searchBtnText}}</button>\n\n    <button ng-if="($ctrl.type == \'searchBtn\'|| $ctrl.type == \'searchBtnDropDown\') && $ctrl.disable" class="btn n-search-button" disabled >{{$ctrl.searchBtnText}}</button>\n</div>')}])});