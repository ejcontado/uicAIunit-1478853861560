!function(a){"function"==typeof define&&define.amd?define(["angular","../const/constants"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("angular"):require("angular")(b)),a(c,require("../const/constants")),c}:a(angular)}(function(a){"use strict";var b=function(b,c){var d=this,e=[],f=-1;d.focusedIndex=f,d.selectable="selection"===c.type,d.addItem=function(a,b){a.isFocusable&&0===e.length&&(a.tabindex=0),e.push(a),b&&(f=e.length-1,d.focusedIndex=f,e[0].tabindex=-1,a.tabindex=0)};var g=function(a){for(var b=0;b<e.length;b++)if(e[b]===a)return b};d.setSelectedItemByIndex=function(a,b){f!==-1?e[f].toggleSelect(!1):e[0].tabindex=-1,e[a].toggleSelect(!0),f=a,d.focusedIndex=f,d.onItemSelected()&&"function"==typeof d.onItemSelected&&d.onItemSelected()(a,d.heading,b)},d.setSelectedItem=function(a,b){var c=g(a);d.setSelectedItemByIndex(c,b)},d.$onChanges=function(a){for(var b=0;b<e.length;b++)e[b].onChange(a)},d.setFocusItem=function(a){d.focusedIndex=g(a)},d.handleKeypress=function(c){var f=a.element(c.target).parent().parent().parent();switch(c.keyCode){case b.DOWN:d.focusedIndex<e.length-1&&(d.focusedIndex++,f.find("li")[d.focusedIndex].focus());break;case b.UP:d.focusedIndex>0&&(d.focusedIndex--,f.find("li")[d.focusedIndex].focus());break;case b.SPACE:case b.ENTER:d.focusedIndex!==-1&&d.setSelectedItemByIndex(d.focusedIndex,c)}c.preventDefault()}};b.$inject=["WF-KEYCODE-CONST","$attrs"];var c=function(){var a=this;a.$onInit=function(){a.isSelectable=a.listCtrl.selectable,a.isDisabled=a.listCtrl.disable,a.isFocusable=a.isSelectable&&!a.isDisabled,a.tabindex=a.isFocusable?-1:void 0,a.listCtrl.addItem(this,a.select)},a.onChange=function(b){void 0!==b.disable&&(a.isDisabled=b.disable.currentValue,a.isFocusable=a.isSelectable&&!a.isDisabled)},a.selectThis=function(b){a.isDisabled!==!1&&void 0!==a.isDisabled||a.isSelectable!==!0||a.listCtrl.setSelectedItem(this,b)},a.toggleSelect=function(b){a.select=b,a.tabindex=b?0:-1},a.focusThis=function(){a.listCtrl.setFocusItem(this)}};a.module("wf.angular.list",["wf.angular.constants"]).component("wfList",{transclude:!0,templateUrl:"wf/ng-template/list/list.html",controller:b,bindings:{disable:"<?",design:"@",type:"<",heading:"@",onItemSelected:"&"}}).component("wfListItem",{transclude:!0,templateUrl:"wf/ng-template/list/listItem.html",bindings:{select:"<?"},require:{listCtrl:"^wfList"},controller:c})});