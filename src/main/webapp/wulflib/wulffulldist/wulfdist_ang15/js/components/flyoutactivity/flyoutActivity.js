!function(a){"function"==typeof define&&define.amd?define(["angular","../const/constants"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("angular"):require("angular")(b)),a(c,require("../const/constants")),c}:a(angular)}(function(a){var b=function(){var a=this,b=a.areas=[],e=a.tabs=[];switch(a.direction||(a.direction="right"),a.direction){case"left":a.right=0;break;case"right":a.left=0}this.getDirection=function(){return a.direction},this.getAllAreas=function(){return b},this.getAllTabs=function(){return e},this.addAreas=function(a){b.push(a)},this.addTabs=function(a){e.push(a)},this.removeArea=function(a){var d=c(a);null!==d&&b.splice(d,1)},this.removeTab=function(a){var b=d(a);null!==b&&e.splice(b,1)}},c=function(a,b){for(var c=null,d=a.length,e=0;e<d;e++)a[e]===b&&(c=e);return c},d=function(a,b){for(var c=null,d=a.length,e=0;e<d;e++)a[e]===b&&(c=e);return c},e=function(){var a=this;this.$onInit=function(){a.show=!1,a.parent.addAreas(a),a.width=parseInt(a.parent.width),a.height=parseInt(a.parent.height),a.direction=a.parent.direction},this.$onDestroy=function(){a.parent.removeArea(a)}},f=function(a,b){var c=this;this.$onInit=function(){c.parent.tabsContainer=c,"right"===c.parent.direction?(c.left=0,c.top=0):"left"===c.parent.direction&&(c.right=0,c.top=0)}},g=function(b,c){var e=this;this.$onInit=function(){e.top=0,e.parent.addTabs(e),e.direction=e.parent.direction;var a=e.parent.getAllTabs(),c=a.length;c>1&&(a[c-1].top=a[c-2].top+2*b.children()[0].offsetHeight/3)};var f=function(a){for(var b=0;b<a.length;b++)if(a[b].show)return!0},g=function(a){for(var b=0;b<a.length;b++)a[b].show=!0},h=function(a){for(var b=0;b<a.length;b++)a[b].show=!1},i=function(a,b){switch(b.direction){case"left":h(a),b.parent.tabsContainer.right=0;break;case"right":h(a),b.parent.tabsContainer.left=0}},j=function(a,b){switch(b.direction){case"left":b.parent.right=0,g(a),b.parent.tabsContainer.right=parseInt(b.parent.width)+5;break;case"right":b.parent.left=0,g(a),b.parent.tabsContainer.left=parseInt(b.parent.width)-2}};this.handleFlyoutOpen=function(a){var b=this,c=b.parent.getAllAreas(),e=b.parent.getAllTabs();if(f(c)?b.selected&&i(c,b):j(c,b),f(c)){for(var g=0;g<e.length;g++)e[g].selected=!1,e[g].zIndex=e.length-g;b.selected=!0,b.zIndex=e.length+1,b.focus=!0,h(c),c[d(e,b)].show=!0}},this.handleFlyoutFocus=function(a){for(var b=this,c=b.parent.getAllTabs(),d=0;d<c.length;d++)c[d].selected||(c[d].zIndex=c.length-d);b.zIndex=c.length+1};var k=function(a){for(var b=0;b<a.length;b++)a[b].focus=!1,a[b].selected=!1,a[b].zIndex=0};this.keyboardNavigation=function(b){var e=this,g=e.parent.getAllTabs(),i=e.parent.getAllAreas(),j=d(g,e);b.keyCode===c.TAB&&b.shiftKey||b.keyCode===c.UP?(k(g),j-1>=0?(a.element(b.target).parent().parent().parent().find("li")[j-1].firstElementChild.focus(),g[j-1].selected=!0,g[j-1].zIndex=g.length+1,f(i)&&(h(i),i[j-1].show=!0),b.preventDefault()):0===j&&(g[j].zIndex=g.length)):b.keyCode!==c.DOWN&&b.keyCode!==c.TAB||(k(g),j+1<g.length&&(a.element(b.target).parent().parent().parent().find("li")[j+1].firstElementChild.focus(),g[j+1].selected=!0,g[j+1].zIndex=g.length+1,f(i)&&(h(i),i[j+1].show=!0),b.preventDefault()))},this.$onDestroy=function(){e.parent.removeTab(e)}};f.$inject=["$attrs","$element"],g.$inject=["$element","WF-KEYCODE-CONST"],a.module("wf.angular.flyoutactivity",["wf.angular.constants","ngAnimate"]).component("wfFlyoutActivity",{transclude:!0,templateUrl:"wf/ng-template/flyoutactivity/flyoutactivity.html",bindings:{direction:"@",height:"@",width:"@"},controller:b}).component("wfFlyoutActivityArea",{templateUrl:"wf/ng-template/flyoutactivity/flyoutactivity-area.html",require:{parent:"^wfFlyoutActivity"},transclude:!0,controller:e}).component("wfFlyoutTabsContainer",{templateUrl:"wf/ng-template/flyoutactivity/flyoutactivity-tabs-container.html",require:{parent:"^^wfFlyoutActivity"},transclude:!0,controller:f}).component("wfFlyoutTab",{templateUrl:"wf/ng-template/flyoutactivity/flyoutactivity-tab.html",require:{parent:"^^wfFlyoutActivity"},transclude:!0,controller:g})});