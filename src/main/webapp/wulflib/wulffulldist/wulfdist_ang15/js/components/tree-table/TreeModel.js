!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.TreeModel=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d,e;d=a("mergesort"),e=a("find-insert-index"),b.exports=function(){"use strict";function a(a){return function(){return a}}function b(a){a=a||{},this.config=a,this.config.childrenPropertyName=a.childrenPropertyName||"children",this.config.modelComparatorFn=a.modelComparatorFn}function c(a,b){return b.parent=a,a.children.push(b),b}function f(a){return"function"==typeof a.config.modelComparatorFn}function g(a,b){this.config=a,this.model=b,this.children=[]}function h(a,b,c){var d;if(!(b instanceof g))throw new TypeError("Child must be of type Node.");if(b.parent=a,a.model[a.config.childrenPropertyName]instanceof Array||(a.model[a.config.childrenPropertyName]=[]),f(a))d=e(a.config.modelComparatorFn,a.model[a.config.childrenPropertyName],b.model),a.model[a.config.childrenPropertyName].splice(d,0,b.model),a.children.splice(d,0,b);else if(void 0===c)a.model[a.config.childrenPropertyName].push(b.model),a.children.push(b);else{if(c<0||c>a.children.length)throw new Error("Invalid index.");a.model[a.config.childrenPropertyName].splice(c,0,b.model),a.children.splice(c,0,b)}return b}function i(){var a={};if(1===arguments.length?"function"==typeof arguments[0]?a.fn=arguments[0]:a.options=arguments[0]:2===arguments.length?"function"==typeof arguments[0]?(a.fn=arguments[0],a.ctx=arguments[1]):(a.options=arguments[0],a.fn=arguments[1]):(a.options=arguments[0],a.fn=arguments[1],a.ctx=arguments[2]),a.options=a.options||{},a.options.strategy||(a.options.strategy="pre"),!j[a.options.strategy])throw new Error("Unknown tree walk strategy. Valid strategies are 'pre' [default], 'post' and 'breadth'.");return a}var j;return j={},b.prototype.parse=function(a){var b,e,f;if(!(a instanceof Object))throw new TypeError("Model must be of type object.");if(f=new g(this.config,a),a[this.config.childrenPropertyName]instanceof Array)for(this.config.modelComparatorFn&&(a[this.config.childrenPropertyName]=d(this.config.modelComparatorFn,a[this.config.childrenPropertyName])),b=0,e=a[this.config.childrenPropertyName].length;b<e;b++)c(f,this.parse(a[this.config.childrenPropertyName][b]));return f},g.prototype.isRoot=function(){return void 0===this.parent},g.prototype.hasChildren=function(){return this.children.length>0},g.prototype.addChild=function(a){return h(this,a)},g.prototype.addChildAtIndex=function(a,b){if(f(this))throw new Error("Cannot add child at index when using a comparator function.");return h(this,a,b)},g.prototype.setIndex=function(a){if(f(this))throw new Error("Cannot set node index when using a comparator function.");if(this.isRoot()){if(0===a)return this;throw new Error("Invalid index.")}if(a<0||a>=this.parent.children.length)throw new Error("Invalid index.");var b=this.parent.children.indexOf(this);return this.parent.children.splice(a,0,this.parent.children.splice(b,1)[0]),this.parent.model[this.parent.config.childrenPropertyName].splice(a,0,this.parent.model[this.parent.config.childrenPropertyName].splice(b,1)[0]),this},g.prototype.getPath=function(){var a=[];return function b(c){a.unshift(c),c.isRoot()||b(c.parent)}(this),a},g.prototype.getIndex=function(){return this.isRoot()?0:this.parent.children.indexOf(this)},g.prototype.walk=function(){var a;a=i.apply(this,arguments),j[a.options.strategy].call(this,a.fn,a.ctx)},j.pre=function a(b,c){var d,e,f;for(f=b.call(c,this),d=0,e=this.children.length;d<e;d++){if(f===!1)return!1;f=a.call(this.children[d],b,c)}return f},j.post=function a(b,c){var d,e,f;for(d=0,e=this.children.length;d<e;d++)if(f=a.call(this.children[d],b,c),f===!1)return!1;return f=b.call(c,this)},j.breadth=function(a,b){var c=[this];!function d(){var e,f,g;if(0!==c.length){for(g=c.shift(),e=0,f=g.children.length;e<f;e++)c.push(g.children[e]);a.call(b,g)!==!1&&d()}}()},g.prototype.all=function(){var b,c=[];return b=i.apply(this,arguments),b.fn=b.fn||a(!0),j[b.options.strategy].call(this,function(a){b.fn.call(b.ctx,a)&&c.push(a)},b.ctx),c},g.prototype.first=function(){var b,c;return b=i.apply(this,arguments),b.fn=b.fn||a(!0),j[b.options.strategy].call(this,function(a){if(b.fn.call(b.ctx,a))return c=a,!1},b.ctx),c},g.prototype.drop=function(){var a;return this.isRoot()||(a=this.parent.children.indexOf(this),this.parent.children.splice(a,1),this.parent.model[this.config.childrenPropertyName].splice(a,1),this.parent=void 0,delete this.parent),this},b}()},{"find-insert-index":2,mergesort:3}],2:[function(a,b,c){b.exports=function(){"use strict";function a(a,b,c){var d,e;for(d=0,e=b.length;d<e&&!(a(b[d],c)>0);d++);return d}return a}()},{}],3:[function(a,b,c){b.exports=function(){"use strict";function a(c,d){var e,f,g=d.length;return g>=2?(e=d.slice(0,g/2),f=d.slice(g/2,g),b(c,a(c,e),a(c,f))):d.slice()}function b(a,b,c){for(var d=[],e=b.length,f=c.length;e>0&&f>0;)a(b[0],c[0])<=0?(d.push(b.shift()),e--):(d.push(c.shift()),f--);return e>0?d.push.apply(d,b):d.push.apply(d,c),d}return a}()},{}]},{},[1])(1)});