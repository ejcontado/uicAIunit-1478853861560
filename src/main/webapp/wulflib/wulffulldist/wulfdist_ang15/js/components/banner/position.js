!function(a){"function"==typeof define&&define.amd?define(["angular"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("angular"):require("angular")(b)),a(c,require()),c}:a(angular)}(function(a){"use strict";a.module("wf.angular.position",[]).factory("$wfPosition",["$document","$window",function(b,c){var d,e,f={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},g={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},h=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(a){function d(a){return"static"===(c.getComputedStyle(a).position||"static")}a=this.getRawNode(a);for(var e=a.offsetParent||b[0].documentElement;e&&e!==b[0].documentElement&&d(e);)e=e.offsetParent;return e||b[0].documentElement},scrollbarWidth:function(f){if(f){if(a.isUndefined(e)){var g=b.find("body");g.addClass("wf-position-body-scrollbar-measure"),e=c.innerWidth-g[0].clientWidth,e=isFinite(e)?e:0,g.removeClass("wf-position-body-scrollbar-measure")}return e}if(a.isUndefined(d)){var h=a.element('<div class="wf-position-scrollbar-measure"></div>');b.find("body").append(h),d=h[0].offsetWidth-h[0].clientWidth,d=isFinite(d)?d:0,h.remove()}return d},scrollbarPadding:function(a){a=this.getRawNode(a);var b=c.getComputedStyle(a),d=this.parseStyle(b.paddingRight),e=this.parseStyle(b.paddingBottom),f=this.scrollParent(a,!1,!0),g=this.scrollbarWidth(f,h.test(f.tagName));return{scrollbarWidth:g,widthOverflow:f.scrollWidth>f.clientWidth,right:d+g,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+g,originalBottom:e}},isScrollable:function(a,b){a=this.getRawNode(a);var d=b?f.hidden:f.normal,e=c.getComputedStyle(a);return d.test(e.overflow+e.overflowY+e.overflowX)},scrollParent:function(a,d,e){a=this.getRawNode(a);var g=d?f.hidden:f.normal,h=b[0].documentElement,i=c.getComputedStyle(a);if(e&&g.test(i.overflow+i.overflowY+i.overflowX))return a;var j="absolute"===i.position,k=a.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=c.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(d,e){d=this.getRawNode(d);var f=this.offset(d);if(e){var g=c.getComputedStyle(d);f.top-=this.parseStyle(g.marginTop),f.left-=this.parseStyle(g.marginLeft)}var h=this.offsetParent(d),i={top:0,left:0};return h!==b[0].documentElement&&(i=this.offset(h),i.top+=h.clientTop-h.scrollTop,i.left+=h.clientLeft-h.scrollLeft),{width:Math.round(a.isNumber(f.width)?f.width:d.offsetWidth),height:Math.round(a.isNumber(f.height)?f.height:d.offsetHeight),top:Math.round(f.top-i.top),left:Math.round(f.left-i.left)}},offset:function(d){d=this.getRawNode(d);var e=d.getBoundingClientRect();return{width:Math.round(a.isNumber(e.width)?e.width:d.offsetWidth),height:Math.round(a.isNumber(e.height)?e.height:d.offsetHeight),top:Math.round(e.top+(c.pageYOffset||b[0].documentElement.scrollTop)),left:Math.round(e.left+(c.pageXOffset||b[0].documentElement.scrollLeft))}},viewportOffset:function(a,d,e){a=this.getRawNode(a),e=e!==!1;var f=a.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?b[0].documentElement:this.scrollParent(a),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===b[0].documentElement&&(g.top+=c.pageYOffset,g.left+=c.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=c.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=g.auto.test(a);return b&&(a=a.replace(g.auto,"")),a=a.split("-"),a[0]=a[0]||"top",g.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",g.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(b,d,e,f){b=this.getRawNode(b),d=this.getRawNode(d);var h=a.isDefined(d.offsetWidth)?d.offsetWidth:d.prop("offsetWidth"),i=a.isDefined(d.offsetHeight)?d.offsetHeight:d.prop("offsetHeight");e=this.parsePlacement(e);var j=f?this.offset(b):this.position(b),k={top:0,left:0,placement:""};if(e[2]){var l=this.viewportOffset(b,f),m=c.getComputedStyle(d),n={width:h+Math.round(Math.abs(this.parseStyle(m.marginLeft)+this.parseStyle(m.marginRight))),height:i+Math.round(Math.abs(this.parseStyle(m.marginTop)+this.parseStyle(m.marginBottom)))};if(e[0]="top"===e[0]&&n.height>l.top&&n.height<=l.bottom?"bottom":"bottom"===e[0]&&n.height>l.bottom&&n.height<=l.top?"top":"left"===e[0]&&n.width>l.left&&n.width<=l.right?"right":"right"===e[0]&&n.width>l.right&&n.width<=l.left?"left":e[0],e[1]="top"===e[1]&&n.height-j.height>l.bottom&&n.height-j.height<=l.top?"bottom":"bottom"===e[1]&&n.height-j.height>l.top&&n.height-j.height<=l.bottom?"top":"left"===e[1]&&n.width-j.width>l.right&&n.width-j.width<=l.left?"right":"right"===e[1]&&n.width-j.width>l.left&&n.width-j.width<=l.right?"left":e[1],"center"===e[1])if(g.vertical.test(e[0])){var o=j.width/2-h/2;l.left+o<0&&n.width-j.width<=l.right?e[1]="left":l.right+o<0&&n.width-j.width<=l.left&&(e[1]="right")}else{var p=j.height/2-n.height/2;l.top+p<0&&n.height-j.height<=l.bottom?e[1]="top":l.bottom+p<0&&n.height-j.height<=l.top&&(e[1]="bottom")}}switch(e[0]){case"top":k.top=j.top-i;break;case"bottom":k.top=j.top+j.height;break;case"left":k.left=j.left-h;break;case"right":k.left=j.left+j.width}switch(e[1]){case"top":k.top=j.top;break;case"bottom":k.top=j.top+j.height-i;break;case"left":k.left=j.left;break;case"right":k.left=j.left+j.width-h;break;case"center":g.vertical.test(e[0])?k.left=j.left+j.width/2-h/2:k.top=j.top+j.height/2-i/2}return k.top=Math.round(k.top),k.left=Math.round(k.left),k.placement="center"===e[1]?e[0]:e[0]+"-"+e[1],k},adjustTop:function(a,b,c,d){if(a.indexOf("top")!==-1&&c!==d)return{top:b.top-d+"px"}},positionArrow:function(b,d){b=this.getRawNode(b);var e=b.querySelector(".tooltip-inner, .popover-inner");if(e){var f=a.element(e).hasClass("tooltip-inner"),h=f?b.querySelector(".tooltip-arrow"):b.querySelector(".arrow");if(h){var i={top:"",bottom:"",left:"",right:""};if(d=this.parsePlacement(d),"center"===d[1])return void a.element(h).css(i);var j="border-"+d[0]+"-width",k=c.getComputedStyle(h)[j],l="border-";l+=g.vertical.test(d[0])?d[0]+"-"+d[1]:d[1]+"-"+d[0],l+="-radius";var m=c.getComputedStyle(f?e:b)[l];switch(d[0]){case"top":i.bottom=f?"0":"-"+k;break;case"bottom":i.top=f?"0":"-"+k;break;case"left":i.right=f?"0":"-"+k;break;case"right":i.left=f?"0":"-"+k}i[d[1]]=m,a.element(h).css(i)}}}}}])});