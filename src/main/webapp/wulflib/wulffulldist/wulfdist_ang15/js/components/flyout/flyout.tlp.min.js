!function(a){"function"==typeof define&&define.amd?define(["angular","../const/constants"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("angular"):require("angular")(b)),a(c,require("../const/constants")),c}:a(angular)}(function(a){function b(a,b){var c=a.querySelector(".n-flyout-container"),d=c.offsetWidth;switch(b.direction){case"left":a.style.right=-d+"px",c.style.display="none";break;case"right":a.style.left=-d+"px",c.style.display="none"}b.expand="false"}var c=function(a){return a.offsetWidth||a.offsetHeight},d=function(d,f,g,h,i,j){var k=this;this.show=!1,k.direction||(k.direction="right"),f(function(){var b=i[0].querySelector(".n-flyout-container"),c=b.offsetWidth,d=b.offsetHeight,e=i[0].querySelector(".n-flyout-open"),f=e.offsetHeight;"left"===k.direction?(a.element(i[0].querySelector(".n-flyout-open")).addClass("left"),a.element(i[0].querySelector(".n-flyout-menu")).addClass("left"),a.element(i[0].querySelector(".n-flyout")).css("right",-c+"px"),e.style.right=c+1+"px",e.style.top=Math.ceil((d-f)/2)+"px"):"right"===k.direction&&(a.element(i[0].querySelector(".n-flyout")).css("left",-c+"px"),e.style.left=c+1+"px",e.style.top=Math.ceil((d-f)/2)+"px"),b.style.display="none"},300),this.handleFlyoutOpen=function(a){var d=i[0].querySelector(".n-flyout"),f=d.querySelector(".n-flyout-container");c(f)?b(d,k):e(d,k)}};d.$inject=["$rootScope","$timeout","$animate","$document","$element","WF-KEYCODE-CONST"];var e=function(b,c){var d=b.querySelector(".n-flyout-container");switch(c.direction){case"left":b.style.right="0px",d.style.display="block";break;case"right":b.style.left="0px",d.style.display="block"}c.expand="true",d.querySelector("a").focus(),a.element(d.querySelectorAll("li")).removeClass("selected")},f=function(b,c,d,e){var f=this;this.displayText=this.value,this.handleItemSelected=function(a){e.parent().find("li").removeClass("selected"),e.find("li").toggleClass("selected"),f.onClickCallback()&&f.onClickCallback()(a)},this.keyboardNavigation=function(c){var d=c.keyCode,e=a.element(c.target),f=e.parent();switch(d){case b.UP:g(c,f,!1);break;case b.DOWN:g(c,f,!0);break;case b.SPACE:c.preventDefault(),this.handleItemSelected(c)}};var g=function(a,b,c){a.preventDefault();var d=b.parent().parent().find("li"),e=j(b,d,c);null!==e&&h(d,e)},h=function(a,b){var d=i(a,b);c(function(){d.focus()},0)},i=function(a,b){return a[b].firstElementChild},j=function(a,b,c){var d=k(a,b),e=null,f=0;if(c){for(f=++d;f<b.length;f++)if(!b[f].firstElementChild.disabled){e=f;break}}else for(f=--d;f>=0;f--)if(!b[f].firstElementChild.disabled){e=f;break}return e},k=function(a,b){for(var c=null,d=0;d<b.length;d++)if(b[d]===a[0]){c=d;break}return c}};f.$inject=["WF-KEYCODE-CONST","$timeout","$rootScope","$element"],a.module("wf.angular.flyout",["wf.angular.constants","ngAnimate"]).component("wfFlyout",{transclude:!0,templateUrl:"wf/ng-template/flyout/flyout.html",bindings:{direction:"@"},controller:d}).component("wfFlyoutItem",{templateUrl:"wf/ng-template/flyout/flyoutItem.html",require:{parent:"^^wfFlyout"},bindings:{value:"@",onClickCallback:"&"},controller:f}),a.module("wf.angular.flyout").run(["$templateCache",function(a){a.put("wf/ng-template/flyout/flyout.html",'<div class="n-flyout" id="myFlyout" data-expand="{{$ctrl.expand}}">\n    <div class="n-flyout-container">\n        <ul class="n-flyout-menu" style="display: block" ng-transclude>\n        </ul>\n    </div>\n    <a class="n-flyout-open" ng-click="$ctrl.handleFlyoutOpen($event)" href="javascript:void(0)">\n        <span class="middle"><i class="icon icon-list"></i></span>\n    </a>\n</div>')}]),a.module("wf.angular.flyout").run(["$templateCache",function(a){a.put("wf/ng-template/flyout/flyoutItem.html",'<li ng-cloak ng-click="$ctrl.handleItemSelected($event)" ng-keydown="$ctrl.keyboardNavigation($event)">\n    <a href="#">\n        <span>{{$ctrl.displayText}}</span>\n    </a>\n</li>')}])});